# 首页可视化

1. 从版本库中获取所有首页广告的最新版本信息   List<VSequence> list =，创建一个楼层对象集合ArrayList<VModuleAppData> appData=

2. 对获取到的版本信息<VSequence> list 进行遍历（版本信息中包括 广告楼层  产品id  等）

3. 通过Targettype字段过滤选取版本信息中不为楼层广告的部分

4. 通过VSequence表的seqid在模块表<VModuleAppData>中查询对应模块（其实模块就是各楼层）的数据，

5. 获取单个楼层对象 data<VModuleAppData> 所涉及到的产品id列表 q_pids

6. 创建一个 楼层广告产品对象  productVo（一个vo类，包含了楼层广告的细节信息，一个楼层对象点击进去之后可能有多个productVo对象），将涉及到的产品id列表添加到属性中，获得一个带有产品细节id列表的实体

7. 然后利用这个productVo 对象中的id值到产品细节表中进行查找，获得一个产品细节信息的集合productVos

8. 遍历productVos，获取每个产品的图片数组，转为集合purls

9. 将每个产品细节图片中的第一张设置到产品信息中（Purl）

10. 将带有产品详细信息的Vo列表（productVos）添加到楼层对象中data<VModuleAppData> 

11. 在 步骤3 中，如果不为楼层广告，则直接利用seqId<VSequence> 到模块表<VModuleAppData>中查询信息并赋值到单个楼层对象data中

12. 如果某个版本 item<VSequence>的target类型为  notice （公告），还会再将系统信息列表对象List<SysNews>添加到这个模块中

13. 然后在楼层对象列表单次循环结束之前将各个data添加到appData中

14. 最终返回appData

    简单关系梳理

    ![楼层广告or公告可视化逻辑](..\img\楼层广告or公告可视化逻辑.png)

