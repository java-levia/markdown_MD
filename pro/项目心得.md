项目心得

1. 优惠券数据库的创建
   1. 如果优惠券的种类比较多的情况下创建数据库要考虑到一个批次问题
   2. 创建优惠券表时，能用一张表尽量不要使用两名表
   3. 对一行数据做更改时，切记校验乐观锁

2. 提现逻辑

   1. 涉及到的表
      1. 用户表c_customer
      2. 用户账户表 c_account
      3. 银行卡详情表 bank_details
      4. 提现规则表  sys_cash_rule
      5. 金额操作明细表  c_money_details
      6. 提现申请记录表  sys_cash_details
   2. 业务流程
      * 用户校验（用户表c_customer）
      * 用户账户校验(用户账户表 c_account)
      * 确保用户id和bankDetails表中的customer_id匹配 
      * 获取提现规则
        * 提现是否开启
        * 提现金额大于最小提现金额  小于最大提现金额
        * 提现金额为某个数的整数倍
        * 限制每日/周/月的提现次数
        * 校验提现短信（提现密码）
      * 生成提现流水号
      * 执行转账逻辑（包括余额校验和转账细节的记录）
        * 查询用户账户金额
        * 操作用户账户金额
        * 修改用户余额
        * 插入用户金额明细表
   3. sys_cash_details数据插入

   

